import{p as I,m as B,W as ne,c as K,d as oe,g as A,Y as ie,ao as ce,z as g,ab as W,t as z,l as D,o as e,ap as Y,aq as Q,ar as re,w as X,v as ue,as as de,I as U,at as ve,u as ee,au as pe,V as ae,av as me,aw as xe,b as fe,ax as _e,ay as he,f as ge,az as ye,aA as be,r as Ve,x as we,A as b,T as S,B as ke,C as L,D as M,F as s,aB as Pe,H as O,ag as n,K as V,aC as Ce,af as E,U as m,aD as Z,J as T,P as x,O as w,al as Se,am as Ee,N as Te,aE as Ie,aF as Be,aG as Ae,E as De}from"./index-acf387ef.js";import{c as Fe,b as Re,u as je,d as Le,V as qe}from"./vee-validate.esm-ec558189.js";import{F as ze}from"./FooterSection-bcea417d.js";import{V as H}from"./VContainer-09275625.js";import{V as q,a as k}from"./VRow-6d3d5382.js";import"./_commonjsHelpers-39b5b250.js";const P=Symbol.for("vuetify:v-expansion-panel"),$e=["default","accordion","inset","popout"],Ne=I({color:String,variant:{type:String,default:"default",validator:a=>$e.includes(a)},readonly:Boolean,...B(),...ne(),...K(),...oe()},"VExpansionPanels"),Ge=A()({name:"VExpansionPanels",props:Ne(),emits:{"update:modelValue":a=>!0},setup(a,f){let{slots:o}=f;ie(a,P);const{themeClasses:t}=ce(a),c=g(()=>a.variant&&`v-expansion-panels--variant-${a.variant}`);return W({VExpansionPanel:{color:z(a,"color")},VExpansionPanelTitle:{readonly:z(a,"readonly")}}),D(()=>e(a.tag,{class:["v-expansion-panels",t.value,c.value,a.class],style:a.style},o)),{}}}),Ue=I({...B(),...Y()},"VExpansionPanelText"),$=A()({name:"VExpansionPanelText",props:Ue(),setup(a,f){let{slots:o}=f;const t=Q(P);if(!t)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:c,onAfterLeave:v}=re(a,t.isSelected);return D(()=>e(de,{onAfterLeave:v},{default:()=>{var u;return[X(e("div",{class:["v-expansion-panel-text",a.class],style:a.style},[o.default&&c.value&&e("div",{class:"v-expansion-panel-text__wrapper"},[(u=o.default)==null?void 0:u.call(o)])]),[[ue,t.isSelected.value]])]}})),{}}}),te=I({color:String,expandIcon:{type:U,default:"$expand"},collapseIcon:{type:U,default:"$collapse"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...B()},"VExpansionPanelTitle"),N=A()({name:"VExpansionPanelTitle",directives:{Ripple:ve},props:te(),setup(a,f){let{slots:o}=f;const t=Q(P);if(!t)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:c,backgroundColorStyles:v}=ee(a,"color"),u=g(()=>({collapseIcon:a.collapseIcon,disabled:t.disabled.value,expanded:t.isSelected.value,expandIcon:a.expandIcon,readonly:a.readonly}));return D(()=>{var y;return X(e("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":t.isSelected.value},c.value,a.class],style:[v.value,a.style],type:"button",tabindex:t.disabled.value?-1:void 0,disabled:t.disabled.value,"aria-expanded":t.isSelected.value,onClick:a.readonly?void 0:t.toggle},[e("span",{class:"v-expansion-panel-title__overlay"},null),(y=o.default)==null?void 0:y.call(o,u.value),!a.hideActions&&e("span",{class:"v-expansion-panel-title__icon"},[o.actions?o.actions(u.value):e(ae,{icon:t.isSelected.value?a.collapseIcon:a.expandIcon},null)])]),[[pe("ripple"),a.ripple]])}),{}}}),Me=I({title:String,text:String,bgColor:String,...B(),...me(),...xe(),...Y(),...fe(),...K(),...te()},"VExpansionPanel"),J=A()({name:"VExpansionPanel",props:Me(),emits:{"group:selected":a=>!0},setup(a,f){let{slots:o}=f;const t=_e(a,P),{backgroundColorClasses:c,backgroundColorStyles:v}=ee(a,"bgColor"),{elevationClasses:u}=he(a),{roundedClasses:y}=ge(a),F=g(()=>(t==null?void 0:t.disabled.value)||a.disabled),C=g(()=>t.group.items.value.reduce((p,r,_)=>(t.group.selected.value.includes(r.id)&&p.push(_),p),[])),R=g(()=>{const p=t.group.items.value.findIndex(r=>r.id===t.id);return!t.isSelected.value&&C.value.some(r=>r-p===1)}),j=g(()=>{const p=t.group.items.value.findIndex(r=>r.id===t.id);return!t.isSelected.value&&C.value.some(r=>r-p===-1)});return ye(P,t),W({VExpansionPanelText:{eager:z(a,"eager")}}),D(()=>{const p=!!(o.text||a.text),r=!!(o.title||a.title);return e(a.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":t.isSelected.value,"v-expansion-panel--before-active":R.value,"v-expansion-panel--after-active":j.value,"v-expansion-panel--disabled":F.value},y.value,c.value,a.class],style:[v.value,a.style]},{default:()=>{var _;return[e("div",{class:["v-expansion-panel__shadow",...u.value]},null),r&&e(N,{key:"title",collapseIcon:a.collapseIcon,color:a.color,expandIcon:a.expandIcon,hideActions:a.hideActions,ripple:a.ripple},{default:()=>[o.title?o.title():a.title]}),p&&e($,{key:"text"},{default:()=>[o.text?o.text():a.text]}),(_=o.default)==null?void 0:_.call(o)]}})}),{}}}),Oe={class:"d-flex flex-column justify-center"},Ze={class:"d-flex justify-center align-center"},He=n("span",{class:"mb-5 bg-cyan-lighten-1 text-white text-h4 font-weight-bold text-center",style:{width:"160px"}}," 商品詳情",-1),Je={class:"text-subtitle-2 text-desc"},Ke={class:"text-caption text-indigo mb-5"},We={class:"d-flex justify-start align-center mb-2"},Ye={class:"text-subtitle-1"},Qe={class:"text-h4 font-weight-black mb-5 text-grey-darken-3"},Xe={class:"d-flex align-center"},ea={class:"d-flex"},aa={class:"mb-5 text-right text-h6"},ta={class:"d-flex",style:{height:"50px"}},sa=n("br",null,null,-1),la=n("br",null,null,-1),na=n("br",null,null,-1),oa=n("br",null,null,-1),ia=n("h2",{class:"text-center text-h6 font-weight-bold mb-5 bg-blue text-white rounded-xl"},"你可能還喜歡以下這些商品...",-1),ca={class:"d-flex align-center ms-10"},ra={class:"d-flex justify-center align-center flex-column"},ua={class:"d-flex flex-column"},da={class:"text-left text-caption text-blue-lighten-2"},va={class:"text-wrap text-body-1 font-weight-bold",style:{width:"185px"}},pa={class:"d-flex align-center"},ma={class:"ms-2 text-subtitle-2"},xa={class:"d-flex justify-start align-center"},fa={class:"text-caption text-pink"},wa={__name:"ProductsIdView",setup(a){const f=be(),o=Ve(),t=we(),c=b(0),v=b(!1),u=b(!1),y=()=>{v.value=!v.value},F=async()=>{try{const{data:l}=await S.patch("/users/likes/"+i.value._id,{likes:!u.value});(l.result!==null||l.result!==void 0)&&(c.value=l.result?c.value+1:c.value-1,u.value=l.result)}catch(l){t({text:l.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"error",location:"bottom"}})}},C=g(()=>c.value),R=async()=>{try{await navigator.clipboard.writeText(window.location.href),t({text:"複製成功",showCloseButton:!1,snackbarProps:{timeout:3e3,color:"success",location:"bottom"}})}catch(l){t({text:l,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"error",location:"bottom"}})}},j=Fe({quantity:Re().required("請輸入數量").min(1,"最少為 1").typeError("請輸入正確的數量")}),{isSubmitting:p,handleSubmit:r}=je({validationSchema:j,initialValues:{quantity:1}}),_=Le("quantity"),se=r(async l=>{try{const{data:h}=await S.post("/users/cart",{product:i.value._id,quantity:l.quantity});o.cart=h.result}catch(h){t({text:h.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"error",location:"bottom"}})}}),i=b({_id:"",name:"",price:0,description:"",user:{_id:"",name:"",avatar:""},image:"",sell:!0,category:""}),G=b([]);return(async()=>{try{const l=await Promise.all([S.get("/products/"+f.params.id),S.get("/products/random")]);i.value._id=l[0].data.result._id,i.value.name=l[0].data.result.name,i.value.price=l[0].data.result.price,i.value.description=l[0].data.result.description,i.value.image=l[0].data.result.image,i.value.sell=l[0].data.result.sell,i.value.category=l[0].data.result.category,i.value.user._id=l[0].data.result.user._id,i.value.user.name=l[0].data.result.user.name,i.value.user.avatar=l[0].data.result.user.avatar,G.value.push(...l[1].data.result),document.title="愛買漫 | "+i.value.name,c.value=l[0].data.result.likes||0,u.value=l[0].data.result.liked}catch(l){console.log(l),t({text:l.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"error",location:"bottom"}})}})(),(l,h)=>{const le=ke("RouterLink");return L(),M(O,null,[e(H,null,{default:s(()=>[e(q,{class:"pa-10"},{default:s(()=>[e(k,{class:"pa-0 pe-10",cols:"12",md:"6"},{default:s(()=>[n("div",Oe,[e(V,{class:"mb-5 align-self-center",src:i.value.image,width:"400",onClick:y},null,8,["src"]),e(Ce,{modelValue:v.value,"onUpdate:modelValue":h[0]||(h[0]=d=>v.value=d),"max-width":"80%"},{default:s(()=>[n("div",Ze,[e(V,{class:"elevation-24",src:i.value.image,cover:"","max-width":"650"},null,8,["src"])])]),_:1},8,["modelValue"]),e(E,{class:"mb-5"}),He,n("pre",Je,m(i.value.description),1)])]),_:1}),e(k,{class:"ps-10",cols:"12",md:"6"},{default:s(()=>[n("p",Ke,"類別："+m(i.value.category),1),n("div",We,[e(Z,{class:"me-2",size:"32"},{default:s(()=>[e(V,{src:i.value.user.avatar,cover:"","min-width":"60"},null,8,["src"])]),_:1}),n("h3",Ye,m(i.value.user.name),1)]),n("h1",Qe,m(i.value.name),1),n("div",Xe,[e(T,{class:"me-auto","prepend-icon":"mdi-heart",variant:"outlined",onClick:F,color:u.value?"pink":"grey"},{default:s(()=>[x(m(C.value),1)]),_:1},8,["color"]),e(T,{icon:"mdi-clipboard-text",variant:"text",ripple:!1,onClick:R})]),e(E,{class:"my-4"}),n("div",ea,[e(ae,{class:"me-auto",icon:"mdi-cash",size:"40",color:"grey"}),n("p",aa,m(i.value.price)+" NTD",1)]),e(qe,{disabled:w(p),onSubmit:Se(w(se),["prevent"])},{default:s(()=>[n("div",ta,[e(T,{class:"me-auto text-h6 font-weight-bold",type:"submit",color:"blue-lighten-1","prepend-icon":"mdi-cart",height:60,width:300},{default:s(()=>[x("加入購物車")]),_:1}),e(Ee,{class:"ps-15",modelValue:w(_).value.value,"onUpdate:modelValue":h[1]||(h[1]=d=>w(_).value.value=d),modelModifiers:{number:!0},type:"number",min:"1","error-messages":w(_).errorMessage.value,style:{width:"50px"},variant:"outlined"},null,8,["modelValue","error-messages"])])]),_:1},8,["disabled","onSubmit"]),e(Ge,{class:"my-15",multiple:"",variant:"accordion"},{default:s(()=>[e(J,null,{default:s(()=>[e(N,{color:"grey-lighten-5"},{default:s(()=>[x("購買商品時須知")]),_:1}),e($,null,{default:s(()=>[x("- 請在下單前確認商品的規格、數量和價格。 "),sa,x("- 請在收到商品後檢查商品的品質和完整性。"),la,x(" - 如有任何問題或不滿，請在七天內聯繫客服，我們將盡快為您處理。"),na]),_:1})]),_:1}),e(J,null,{default:s(()=>[e(N,{color:"grey-lighten-5"},{default:s(()=>[x("送貨方式")]),_:1}),e($,null,{default:s(()=>[x("透過宅配送達。除網頁另有特別標示外，均為常溫配送。 "),oa]),_:1})]),_:1})]),_:1})]),_:1}),e(E,{class:"my-5"})]),_:1}),e(q,null,{default:s(()=>[e(k,{cols:"12"},{default:s(()=>[ia]),_:1}),(L(!0),M(O,null,Te(G.value,d=>(L(),De(k,{cols:"4",md:"3",key:d._id},{default:s(()=>[n("div",ca,[e(le,{class:"text-decoration-none text-grey-darken-3",to:"/products/"+d._id},{default:s(()=>[n("div",ra,[e(V,{class:"border-random-products",src:d.image,"min-width":190,cover:"","aspect-ratio":"1"},null,8,["src"]),n("div",ua,[n("span",da,"類別："+m(d.category),1),n("span",va,m(d.name),1),n("div",pa,[e(Z,{size:"14"},{default:s(()=>[e(V,{src:d.user.avatar},null,8,["src"])]),_:2},1024),n("span",ma,m(d.user.name),1)])])]),n("div",xa,[n("p",fa,"$"+m(d.price)+" NTD",1)])]),_:2},1032,["to"])])]),_:2},1024))),128))]),_:1})]),_:1}),e(Pe,{class:"d-flex justify-center align-center","model-value":!i.value.sell,persistent:""},{default:s(()=>[e(H,null,{default:s(()=>[e(q,null,{default:s(()=>[e(Ie,{class:"mx-auto",color:"white",width:300,height:120},{default:s(()=>[e(k,{cols:"12"},{default:s(()=>[e(Be,{class:"text-h4 font-weight-black text-red text-center"},{default:s(()=>[x("已下架")]),_:1}),e(E,{class:"ma-1"}),e(Ae,{class:"d-flex justify-center align-center"},{default:s(()=>[e(T,{variant:"elevated",color:"blue-lighten-1",to:"/"},{default:s(()=>[x("回上頁")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]),e(ze,{style:{height:"150px"}})],64)}}};export{wa as default};
