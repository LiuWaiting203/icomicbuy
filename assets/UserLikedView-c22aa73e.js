import{B as h,C as i,E as f,F as a,o as e,K as y,ag as n,U as c,J as x,af as b,aE as _,A as v,x as w,T as k,aF as B,P as V,D as C,N as L,H as S,q as N}from"./index-acf387ef.js";import{V as m,a as u}from"./VRow-6d3d5382.js";import{V as P}from"./VContainer-09275625.js";const $={class:"d-flex flex-column ms-5 my-2"},D={class:"text-blue-darken-3 text-body-1"},T={class:"text-grey-darken-2 text-subtitle-2"},E={class:"text-pink text-caption"},F={class:"d-flex justify-space-between"},R={class:"bg-grey-lighten-4 mt-2 overflow-y-auto pa-2",style:{height:"100px",width:"50%"}},A={class:"text-caption text-desc"},U={__name:"LikedCard",props:{_id:{type:String,default:()=>""},category:{type:String,default:()=>""},image:{type:String,default:()=>""},description:{type:String,default:()=>""},name:{type:String,default:()=>""},price:{type:Number,default:()=>0},sell:{type:Boolean,default:()=>!0},likes:{type:Number,default:()=>0},liked:{type:Boolean,default:()=>!1}},setup(l){return(o,r)=>{const d=h("RouterLink");return i(),f(_,{class:"d-flex rounded-0"},{default:a(()=>[e(m,{class:"w-100","no-gutters":""},{default:a(()=>[e(u,{class:"pa-0",cols:"6",md:"2"},{default:a(()=>[e(y,{src:l.image,"min-width":"120",cover:"","aspect-ratio":"1"},null,8,["src"])]),_:1}),e(u,{cols:"12",md:"10"},{default:a(()=>[n("div",$,[e(d,{class:"text-decoration-none",to:"/products/"+l._id},{default:a(()=>[n("span",D,c(l.name),1)]),_:1},8,["to"]),n("span",T,"分類："+c(l.category),1),n("span",E,"$ "+c(l.price)+" NTD",1),n("div",F,[n("div",R,[n("pre",A,c(l.description),1)]),e(x,{class:"me-5 align-self-end","prepend-icon":"mdi-heart",variant:"outlined",onClick:r[0]||(r[0]=t=>o.$emit("LikesBtn")),color:l.liked?"pink":"grey",width:"50"},null,8,["color"])])])]),_:1}),e(b)]),_:1})]),_:1})}}},J={__name:"UserLikedView",setup(l){const o=v([]),r=w(),d=async t=>{try{const{data:s}=await k.patch("/users/likes/"+o.value[t]._id,{likes:!o.value[t].liked});(s.result!==null||s.result!==void 0)&&(s.result?o.value[t].likes++:o.value[t].likes--,o.value[t].liked=s.result),r({text:"修改成功",showCloseButton:!1,snackbarProps:{timeout:3e3,color:"success",location:"bottom"}})}catch(s){r({text:s.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"error",location:"bottom"}})}};return(async()=>{try{const{data:t}=await k.get("/users/likes");console.log(t),o.value.push(...t.result.map(s=>(s.liked=!0,s)))}catch(t){r({text:t.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"error",location:"bottom"}})}})(),(t,s)=>(i(),f(P,null,{default:a(()=>[e(m,null,{default:a(()=>[e(u,{cols:"12"},{default:a(()=>[e(_,null,{default:a(()=>[e(B,{class:"bg-blue text-h5 font-weight-bold text-center"},{default:a(()=>[V("收藏商品")]),_:1}),e(m,{"no-gutters":""},{default:a(()=>[e(u,{cols:"12"},{default:a(()=>[(i(!0),C(S,null,L(o.value,(p,g)=>(i(),f(U,N({key:p._id},p,{onLikesBtn:j=>d(g)}),null,16,["onLikesBtn"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}};export{J as default};
