import{p as T,m as I,W as le,c as K,d as ne,g as B,Y as oe,as as ie,z as h,ab as W,t as q,l as A,o as e,at as Y,au as Q,av as ce,w as X,v as re,aw as ue,I as N,ax as de,u as ee,ay as pe,V as ae,az as ve,aA as xe,b as me,aB as fe,aC as _e,f as he,aD as ge,aE as ye,r as be,x as Ve,A as C,T as we,ai as G,B as ke,C as R,D as U,F as s,aF as Pe,H as M,ak as l,K as b,aG as Ce,aj as S,U as v,aH as O,J as E,P as x,O as V,ap as Se,aq as Ee,N as Te,ah as Ie,ae as Be,ag as Ae,E as De}from"./index-2c369155.js";import{c as je,b as Fe,u as Re,d as qe,V as Le}from"./vee-validate.esm-961b5b3b.js";import{F as ze}from"./FooterSection-4c267932.js";import{V as H}from"./VContainer-129d0fb9.js";import{V as Z,a as w}from"./VRow-1ef26a63.js";import"./_commonjsHelpers-39b5b250.js";const k=Symbol.for("vuetify:v-expansion-panel"),$e=["default","accordion","inset","popout"],Ne=T({color:String,variant:{type:String,default:"default",validator:a=>$e.includes(a)},readonly:Boolean,...I(),...le(),...K(),...ne()},"VExpansionPanels"),Ge=B()({name:"VExpansionPanels",props:Ne(),emits:{"update:modelValue":a=>!0},setup(a,m){let{slots:n}=m;oe(a,k);const{themeClasses:t}=ie(a),u=h(()=>a.variant&&`v-expansion-panels--variant-${a.variant}`);return W({VExpansionPanel:{color:q(a,"color")},VExpansionPanelTitle:{readonly:q(a,"readonly")}}),A(()=>e(a.tag,{class:["v-expansion-panels",t.value,u.value,a.class],style:a.style},n)),{}}}),Ue=T({...I(),...Y()},"VExpansionPanelText"),L=B()({name:"VExpansionPanelText",props:Ue(),setup(a,m){let{slots:n}=m;const t=Q(k);if(!t)throw new Error("[Vuetify] v-expansion-panel-text needs to be placed inside v-expansion-panel");const{hasContent:u,onAfterLeave:d}=ce(a,t.isSelected);return A(()=>e(ue,{onAfterLeave:d},{default:()=>{var f;return[X(e("div",{class:["v-expansion-panel-text",a.class],style:a.style},[n.default&&u.value&&e("div",{class:"v-expansion-panel-text__wrapper"},[(f=n.default)==null?void 0:f.call(n)])]),[[re,t.isSelected.value]])]}})),{}}}),te=T({color:String,expandIcon:{type:N,default:"$expand"},collapseIcon:{type:N,default:"$collapse"},hideActions:Boolean,ripple:{type:[Boolean,Object],default:!1},readonly:Boolean,...I()},"VExpansionPanelTitle"),z=B()({name:"VExpansionPanelTitle",directives:{Ripple:de},props:te(),setup(a,m){let{slots:n}=m;const t=Q(k);if(!t)throw new Error("[Vuetify] v-expansion-panel-title needs to be placed inside v-expansion-panel");const{backgroundColorClasses:u,backgroundColorStyles:d}=ee(a,"color"),f=h(()=>({collapseIcon:a.collapseIcon,disabled:t.disabled.value,expanded:t.isSelected.value,expandIcon:a.expandIcon,readonly:a.readonly}));return A(()=>{var g;return X(e("button",{class:["v-expansion-panel-title",{"v-expansion-panel-title--active":t.isSelected.value},u.value,a.class],style:[d.value,a.style],type:"button",tabindex:t.disabled.value?-1:void 0,disabled:t.disabled.value,"aria-expanded":t.isSelected.value,onClick:a.readonly?void 0:t.toggle},[e("span",{class:"v-expansion-panel-title__overlay"},null),(g=n.default)==null?void 0:g.call(n,f.value),!a.hideActions&&e("span",{class:"v-expansion-panel-title__icon"},[n.actions?n.actions(f.value):e(ae,{icon:t.isSelected.value?a.collapseIcon:a.expandIcon},null)])]),[[pe("ripple"),a.ripple]])}),{}}}),Me=T({title:String,text:String,bgColor:String,...I(),...ve(),...xe(),...Y(),...me(),...K(),...te()},"VExpansionPanel"),J=B()({name:"VExpansionPanel",props:Me(),emits:{"group:selected":a=>!0},setup(a,m){let{slots:n}=m;const t=fe(a,k),{backgroundColorClasses:u,backgroundColorStyles:d}=ee(a,"bgColor"),{elevationClasses:f}=_e(a),{roundedClasses:g}=he(a),D=h(()=>(t==null?void 0:t.disabled.value)||a.disabled),P=h(()=>t.group.items.value.reduce((p,c,y)=>(t.group.selected.value.includes(c.id)&&p.push(y),p),[])),j=h(()=>{const p=t.group.items.value.findIndex(c=>c.id===t.id);return!t.isSelected.value&&P.value.some(c=>c-p===1)}),F=h(()=>{const p=t.group.items.value.findIndex(c=>c.id===t.id);return!t.isSelected.value&&P.value.some(c=>c-p===-1)});return ge(k,t),W({VExpansionPanelText:{eager:q(a,"eager")}}),A(()=>{const p=!!(n.text||a.text),c=!!(n.title||a.title);return e(a.tag,{class:["v-expansion-panel",{"v-expansion-panel--active":t.isSelected.value,"v-expansion-panel--before-active":j.value,"v-expansion-panel--after-active":F.value,"v-expansion-panel--disabled":D.value},g.value,u.value,a.class],style:[d.value,a.style]},{default:()=>{var y;return[e("div",{class:["v-expansion-panel__shadow",...f.value]},null),c&&e(z,{key:"title",collapseIcon:a.collapseIcon,color:a.color,expandIcon:a.expandIcon,hideActions:a.hideActions,ripple:a.ripple},{default:()=>[n.title?n.title():a.title]}),p&&e(L,{key:"text"},{default:()=>[n.text?n.text():a.text]}),(y=n.default)==null?void 0:y.call(n)]}})}),{}}}),Oe={class:"d-flex flex-column justify-center"},He={class:"d-flex justify-center align-center"},Ze=l("span",{class:"mb-5 bg-cyan-lighten-1 text-white text-h4 font-weight-bold text-center",style:{width:"160px"}}," 商品詳情",-1),Je={class:"text-subtitle-2 text-desc"},Ke={class:"text-caption text-indigo mb-5"},We={class:"d-flex justify-start mb-2"},Ye={class:"text-subtitle-1"},Qe={class:"text-h4 font-weight-black mb-5 text-grey-darken-3"},Xe={class:"d-flex align-center"},ea={class:"d-flex"},aa={class:"mb-5 text-right text-h6"},ta={class:"d-flex",style:{height:"50px"}},sa=l("br",null,null,-1),la=l("br",null,null,-1),na=l("br",null,null,-1),oa=l("br",null,null,-1),ia=l("h2",{class:"text-center text-h6 font-weight-bold mb-5 bg-blue text-white rounded-xl"},"你可能還喜歡以下這些商品...",-1),ca={class:"d-flex justify-center align-center flex-column"},ra={class:"d-flex flex-column"},ua={class:"text-left text-caption text-blue-lighten-2"},da={class:"text-wrap text-body-1 font-weight-bold",style:{width:"185px"}},pa={class:"d-flex align-center"},va={class:"ms-2 text-subtitle-2"},xa={class:"d-flex justify-start align-center"},ma={class:"ms-9 text-caption text-pink"},Va={__name:"ProductsIdView",setup(a){const m=ye(),n=be(),t=Ve(),u=C(0),d=C(!1),f=()=>{d.value=!d.value},g=()=>{u.value++},D=h(()=>u.value),P=async()=>{try{await navigator.clipboard.writeText(window.location.href),t({text:"複製成功",showCloseButton:!1,snackbarProps:{timeout:3e3,color:"success",location:"bottom"}})}catch(i){t({text:i,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"error",location:"bottom"}})}},j=je({quantity:Fe().required("請輸入數量").min(1,"最少為 1").typeError("請輸入正確的數量")}),{isSubmitting:F,handleSubmit:p}=Re({validationSchema:j,initialValues:{quantity:1}}),c=qe("quantity"),y=p(async i=>{try{const{data:_}=await we.post("/users/cart",{product:o.value._id,quantity:i.quantity});n.cart=_.result}catch(_){t({text:_.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"error",location:"bottom"}})}}),o=C({_id:"",name:"",price:0,description:"",user:{_id:"",name:"",avatar:""},image:"",sell:!0,category:""}),$=C([]);return(async()=>{try{const i=await Promise.all([G.get("/products/"+m.params.id),G.get("/products/random")]);o.value._id=i[0].data.result._id,o.value.name=i[0].data.result.name,o.value.price=i[0].data.result.price,o.value.description=i[0].data.result.description,o.value.image=i[0].data.result.image,o.value.sell=i[0].data.result.sell,o.value.category=i[0].data.result.category,o.value.user._id=i[0].data.result.user._id,o.value.user.name=i[0].data.result.user.name,o.value.user.avatar=i[0].data.result.user.avatar,$.value.push(...i[1].data.result),document.title="愛買漫 | "+o.value.name}catch(i){console.log(i),t({text:i.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"error",location:"bottom"}})}})(),(i,_)=>{const se=ke("RouterLink");return R(),U(M,null,[e(H,null,{default:s(()=>[e(Z,{class:"pa-10"},{default:s(()=>[e(w,{class:"pa-0 pe-10",cols:"12",md:"6"},{default:s(()=>[l("div",Oe,[e(b,{class:"mb-5 align-self-center",src:o.value.image,width:"400",onClick:f},null,8,["src"]),e(Ce,{modelValue:d.value,"onUpdate:modelValue":_[0]||(_[0]=r=>d.value=r),"max-width":"80%"},{default:s(()=>[l("div",He,[e(b,{class:"elevation-24",src:o.value.image,cover:"","max-width":"650"},null,8,["src"])])]),_:1},8,["modelValue"]),e(S,{class:"mb-5"}),Ze,l("pre",Je,v(o.value.description),1)])]),_:1}),e(w,{class:"ps-10",cols:"12",md:"6"},{default:s(()=>[l("p",Ke,"類別："+v(o.value.category),1),l("div",We,[e(O,{class:"me-2",size:"32"},{default:s(()=>[e(b,{src:o.value.user.avatar},null,8,["src"])]),_:1}),l("h3",Ye,v(o.value.user.name),1)]),l("h1",Qe,v(o.value.name),1),l("div",Xe,[e(E,{class:"me-auto","prepend-icon":"mdi-heart",variant:"outlined",onClick:g,color:"pink"},{default:s(()=>[x(v(D.value),1)]),_:1}),e(E,{icon:"mdi-clipboard-text",variant:"text",ripple:!1,onClick:P})]),e(S,{class:"my-4"}),l("div",ea,[e(ae,{class:"me-auto",icon:"mdi-cash",size:"40",color:"grey"}),l("p",aa,v(o.value.price)+" NTD",1)]),e(Le,{disabled:V(F),onSubmit:Se(V(y),["prevent"])},{default:s(()=>[l("div",ta,[e(E,{class:"me-auto text-h6 font-weight-bold",type:"submit",color:"blue-lighten-1","prepend-icon":"mdi-cart",height:60,width:300},{default:s(()=>[x("加入購物車")]),_:1}),e(Ee,{class:"ps-15",modelValue:V(c).value.value,"onUpdate:modelValue":_[1]||(_[1]=r=>V(c).value.value=r),modelModifiers:{number:!0},type:"number",min:"1","error-messages":V(c).errorMessage.value,style:{width:"50px"},variant:"outlined"},null,8,["modelValue","error-messages"])])]),_:1},8,["disabled","onSubmit"]),e(Ge,{class:"my-15",multiple:"",variant:"accordion"},{default:s(()=>[e(J,null,{default:s(()=>[e(z,{color:"grey-lighten-5"},{default:s(()=>[x("購買商品時須知")]),_:1}),e(L,null,{default:s(()=>[x("- 請在下單前確認商品的規格、數量和價格。 "),sa,x("- 請在收到商品後檢查商品的品質和完整性。"),la,x(" - 如有任何問題或不滿，請在七天內聯繫客服，我們將盡快為您處理。"),na]),_:1})]),_:1}),e(J,null,{default:s(()=>[e(z,{color:"grey-lighten-5"},{default:s(()=>[x("送貨方式")]),_:1}),e(L,null,{default:s(()=>[x("透過宅配送達。除網頁另有特別標示外，均為常溫配送。 "),oa]),_:1})]),_:1})]),_:1})]),_:1}),e(S,{class:"my-5"}),e(w,{cols:"12"},{default:s(()=>[ia]),_:1}),(R(!0),U(M,null,Te($.value,r=>(R(),De(w,{cols:"3",key:r._id},{default:s(()=>[e(se,{class:"text-decoration-none text-grey-darken-3",to:"/products/"+r._id},{default:s(()=>[l("div",ca,[e(b,{class:"border-random-products",src:r.image,"min-width":190,cover:"","aspect-ratio":"1"},null,8,["src"]),l("div",ra,[l("span",ua,"類別："+v(r.category),1),l("span",da,v(r.name),1),l("div",pa,[e(O,{size:"14"},{default:s(()=>[e(b,{src:r.user.avatar},null,8,["src"])]),_:2},1024),l("span",va,v(r.user.name),1)])])]),l("div",xa,[l("p",ma,"$"+v(r.price)+" NTD",1)])]),_:2},1032,["to"])]),_:2},1024))),128))]),_:1})]),_:1}),e(Pe,{class:"d-flex justify-center align-center","model-value":!o.value.sell,persistent:""},{default:s(()=>[e(H,null,{default:s(()=>[e(Z,null,{default:s(()=>[e(Ie,{class:"mx-auto",color:"white",width:300,height:120},{default:s(()=>[e(w,{cols:"12"},{default:s(()=>[e(Be,{class:"text-h4 font-weight-black text-red text-center"},{default:s(()=>[x("已下架")]),_:1}),e(S,{class:"ma-1"}),e(Ae,{class:"d-flex justify-center align-center"},{default:s(()=>[e(E,{variant:"elevated",color:"blue-lighten-1",to:"/"},{default:s(()=>[x("回上頁")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model-value"]),e(ze,{style:{height:"150px"}})],64)}}};export{Va as default};
