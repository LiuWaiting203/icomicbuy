import{x as w,b0 as y,ae as k,C as S,D as B,o as e,F as s,O as a,al as C,ag as n,J as g,K as P,am as i,P as F}from"./index-5019ac1a.js";import{_ as M}from"./comic-4d5ad4f9.js";import{v as q}from"./index-6fc8fe85.js";import{c as U,a as u,e as j,u as E,d as c,V as N}from"./vee-validate.esm-566a8d2f.js";import{V as R}from"./VContainer-7042b4a0.js";import{V as $,a as r}from"./VRow-9737687b.js";import"./_commonjsHelpers-39b5b250.js";const O={class:"bg-register"},T=n("span",{class:"d-block mb-3"},"帳號",-1),D=n("span",{class:"d-block mb-3"},"信箱",-1),I=n("span",{class:"d-block mb-3"},"密碼",-1),J=n("span",{class:"d-block mb-3"},"確認密碼",-1),X={__name:"RegisterView",setup(K){const b=w(),v=y(),x=U({account:u().required("帳號必填").min(4,"帳號最少 4 個字").max(20,"帳號最多 20 個字"),email:u().required("信箱必填").test("isEmail","信箱格式錯誤",o=>q.isEmail(o)),password:u().required("密碼必填").min(4,"密碼最少 4 個字").max(20,"密碼最多 20 個字"),confirmPassword:u().required("確認密碼必填").min(4,"確認密碼最少 4 個字").max(20,"確認密碼最多 20 個字").oneOf([j("password")],"密碼不一致")}),{handleSubmit:V,isSubmitting:_}=E({validationSchema:x}),d=c("account"),m=c("email"),p=c("password"),f=c("confirmPassword"),h=V(async o=>{console.log("submit");try{await k.post("/users",{account:o.account,email:o.email,password:o.password,name:o.account}),b({text:"註冊成功",showCloseButton:!1,snackbarProps:{timeout:3e3,color:"success",location:"bottom"}}),v.push("/login")}catch(t){b({text:t.response.data.message,showCloseButton:!1,snackbarProps:{timeout:3e3,color:"error",location:"bottom"}})}});return(o,t)=>(S(),B("div",O,[e(R,{class:"h-100 d-flex justify-center align-center"},{default:s(()=>[e(N,{disabled:a(_),onSubmit:C(a(h),["prevent"])},{default:s(()=>[n("div",null,[e($,{class:"register-panel elevation-12"},{default:s(()=>[e(r,{class:"mb-10 d-flex justify-center align-center",cols:"12"},{default:s(()=>[e(g,{class:"v-btn--active-no-bg text-center",to:"/",ripple:!1,height:"140",variant:"text"},{default:s(()=>[e(P,{src:M,width:420,height:140})]),_:1})]),_:1}),e(r,{class:"px-5 py-0 text-field-shorten",cols:"12"},{default:s(()=>[T,e(i,{clearable:"",label:"帳號",variant:"outlined",density:"compact",modelValue:a(d).value.value,"onUpdate:modelValue":t[0]||(t[0]=l=>a(d).value.value=l),"error-messages":a(d).errorMessage.value,counter:"",maxlength:"20"},null,8,["modelValue","error-messages"])]),_:1}),e(r,{class:"px-5 py-0 text-field-shorten",cols:"12"},{default:s(()=>[D,e(i,{type:"email",clearable:"",label:"信箱",variant:"outlined",density:"compact",modelValue:a(m).value.value,"onUpdate:modelValue":t[1]||(t[1]=l=>a(m).value.value=l),"error-messages":a(m).errorMessage.value},null,8,["modelValue","error-messages"])]),_:1}),e(r,{class:"px-5 py-0 text-field-shorten",cols:"12"},{default:s(()=>[I,e(i,{type:"password",label:"密碼",variant:"outlined",density:"compact",modelValue:a(p).value.value,"onUpdate:modelValue":t[2]||(t[2]=l=>a(p).value.value=l),"error-messages":a(p).errorMessage.value,counter:"",maxlength:"20"},null,8,["modelValue","error-messages"])]),_:1}),e(r,{class:"px-5 py-0 text-field-shorten",cols:"12"},{default:s(()=>[J,e(i,{type:"password",label:"確認密碼",variant:"outlined",density:"compact",modelValue:a(f).value.value,"onUpdate:modelValue":t[3]||(t[3]=l=>a(f).value.value=l),"error-messages":a(f).errorMessage.value,counter:"",maxlength:"20"},null,8,["modelValue","error-messages"])]),_:1}),e(r,{class:"d-flex justify-center",cols:"12"},{default:s(()=>[e(g,{class:"bg-light-blue-lighten-3 text-white",type:"submit"},{default:s(()=>[F("註冊")]),_:1})]),_:1})]),_:1})])]),_:1},8,["disabled","onSubmit"])]),_:1})]))}};export{X as default};
